---
import { Image } from "@astrojs/image/components"
import "@fontsource/inter/900.css"
import Layout from "@layouts/Layout.astro"
import Header from "@components/Header.astro"
import Footer from "@components/Footer.astro"
const { post } = Astro.props
const { title, coverImage } = post.data
const { Content } = await post.render()
let resolvedCoverImage = coverImage ?? `/v-neck-raglan-sweater.jpeg`
const matchImportFromPublicDirReg = /\.\/public/g
const matchImportFromPublicDir = matchImportFromPublicDirReg.exec(coverImage)
if (matchImportFromPublicDir) {
  resolvedCoverImage = coverImage.slice(matchImportFromPublicDir.index + matchImportFromPublicDir[0].length)
}
const ogUrl = new URL(resolvedCoverImage, Astro.url.origin).href
---
<Layout title={title} ogImage={ogUrl}>
  <Header />
  <main>
    <section class="l-container l-container--10-of-12">
      <article>
        <div class="blog-section blog-section--current">
          <div class="blog-post__headline">
            <h1 class="t-blog-title">{title}</h1>
          </div>
          <div class="blog-post__hero-image">
            <Image src={resolvedCoverImage} alt="" width={600} aspectRatio="3:2" />
          </div>
        </div>
      <Content />
      </article>
    </section>
  </main>
  <Footer />
</Layout>
